#executed by a levelEntry armor_stand
#with $(level_id) = this armor stand's UID

#get players on the right page
scoreboard players set @a[tag=tellMe] levelManagerPage 2


#armor_stand should update itself on what scores it should have
execute store result storage phan:level_index level_id int 1 run scoreboard players get @s levelUID
function phan:level_manager/panel/score_attack/load_data_from_storage with storage phan:level_index


#title
tellraw @a[tag=tellMe] ["",{"text":"\n\n\n\n\n\n\n"}]
tellraw @a[tag=tellMe] ["",{"text":"===\\/=== ","bold":true,"color":"yellow"},{"selector":"@s"},{"text":" ===\\/===","bold":true,"color":"yellow"}]

#selectable y/n
execute if entity @s[tag=levelSelectableSA] run tellraw @a[tag=tellMe] ["",{"translate":"gp.level_manager.selectable","bold":true},{"text":"  "},{"translate":"gp.misc.brackets","color":"yellow","bold":false,"with":[{"translate":"gp.misc.yes"}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/set_field_numeric {resource_location:'score_attack',nbt:'selectable',value:1}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.misc.yes"}]}},{"text":" "},{"translate":"gp.misc.brackets","color":"gray","bold":false,"with":[{"translate":"gp.misc.no"}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/set_field_numeric {resource_location:'score_attack',nbt:'selectable',value:0}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.misc.no"}]}}]
execute if entity @s[tag=!levelSelectableSA] run tellraw @a[tag=tellMe] ["",{"translate":"gp.level_manager.selectable","bold":true},{"text":"  "},{"translate":"gp.misc.brackets","color":"gray","bold":false,"with":[{"translate":"gp.misc.yes"}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/set_field_numeric {resource_location:'score_attack',nbt:'selectable',value:1}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.misc.yes"}]}},{"text":" "},{"translate":"gp.misc.brackets","color":"yellow","bold":false,"with":[{"translate":"gp.misc.no"}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/set_field_numeric {resource_location:'score_attack',nbt:'selectable',value:0}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.misc.no"}]}}]
#act 1, 2, 3
$tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_1","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:1}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_1","interpret":false}]}}]
$tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_2","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:2}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_2","interpret":false}]}}]
$tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_3","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:3}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_3","interpret":false}]}}]
#act 1
#$execute if entity @s[tag=act1SelectableSA] run tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_1","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:1}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_1","interpret":false}]}},{"text":"  "},{"translate":"gp.level_manager.act_playable","color":"gray"}]
#$execute if entity @s[tag=!act1SelectableSA] run tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_1","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:1}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_1","interpret":false}]}},{"text":"  "},{"translate":"gp.level_manager.act_not_playable","color":"gray"}]
#act 2
#$execute if entity @s[tag=act2SelectableSA] run tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_2","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:2}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_2","interpret":false}]}},{"text":"  "},{"translate":"gp.level_manager.act_playable","color":"gray"}]
#$execute if entity @s[tag=!act2SelectableSA] run tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_2","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:2}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_2","interpret":false}]}},{"text":"  "},{"translate":"gp.level_manager.act_not_playable","color":"gray"}]
#act 3
#$execute if entity @s[tag=act3SelectableSA] run tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_3","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:3}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_3","interpret":false}]}},{"text":"  "},{"translate":"gp.level_manager.act_playable","color":"gray"}]
#$execute if entity @s[tag=!act3SelectableSA] run tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"light_purple","bold":false,"with":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_3","interpret":false}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/score_attack/act/_menu_lookup_act_set {act:3}"},"hoverEvent":{"action":"show_text","value":[{"nbt":"act_name","storage":"phan_dream_$(level_id):sa_act_3","interpret":false}]}},{"text":"  "},{"translate":"gp.level_manager.act_not_playable","color":"gray"}]
#bronze time
tellraw @a[tag=tellMe] ["",{"translate":"gp.level_manager.bronze_medal_time","bold":true},{"text":"  "},{"text":"[","color":"white"},{"score":{"name":"#digit1BronzeTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_bronze[0]',offset:0,mod:21}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"text":":"},{"score":{"name":"#digit2BronzeTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_bronze[1]',offset:0,mod:6}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"score":{"name":"#digit3BronzeTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_bronze[2]',offset:0,mod:10}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"text":".00]","color":"white"}]
#silver time
tellraw @a[tag=tellMe] ["",{"translate":"gp.level_manager.silver_medal_time","bold":true},{"text":"  "},{"text":"[","color":"white"},{"score":{"name":"#digit1SilverTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_silver[0]',offset:0,mod:21}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"text":":"},{"score":{"name":"#digit2SilverTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_silver[1]',offset:0,mod:6}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"score":{"name":"#digit3SilverTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_silver[2]',offset:0,mod:10}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"text":".00]","color":"white"}]
#gold time
tellraw @a[tag=tellMe] ["",{"translate":"gp.level_manager.gold_medal_time","bold":true},{"text":"  "},{"text":"[","color":"white"},{"score":{"name":"#digit1GoldTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_gold[0]',offset:0,mod:21}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"text":":"},{"score":{"name":"#digit2GoldTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_gold[1]',offset:0,mod:6}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"score":{"name":"#digit3GoldTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_gold[2]',offset:0,mod:10}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"text":".00]","color":"white"}]
#diamond time
tellraw @a[tag=tellMe] ["",{"translate":"gp.level_manager.diamond_medal_time","bold":true},{"text":"  "},{"text":"[","color":"white"},{"score":{"name":"#digit1DiamondTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_diamond[0]',offset:0,mod:21}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"text":":"},{"score":{"name":"#digit2DiamondTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_diamond[1]',offset:0,mod:6}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"score":{"name":"#digit3DiamondTA","objective":"value"},"color":"yellow","bold":false,"clickEvent":{"action":"run_command","value":"/function phan:level_manager/cycle_field {resource_location:'score_attack',nbt:'time_diamond[2]',offset:0,mod:10}"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.level_manager.click_to_cycle"}]}},{"text":".00]","color":"white"}]

#back button
tellraw @a[tag=tellMe] ["",{"text":" "}]
tellraw @a[tag=tellMe] ["",{"translate":"gp.misc.brackets","color":"red","bold":false,"with":[{"translate":"gp.misc.back"}],"clickEvent":{"action":"run_command","value":"/function phan:level_manager/panel/_menu_lookup"},"hoverEvent":{"action":"show_text","value":[{"translate":"gp.misc.back"}]}}]

tellraw @a[tag=tellMe] ["",{"text":"===/\\=== ","bold":true,"color":"yellow"},{"selector":"@s"},{"text":" ===/\\===","bold":true,"color":"yellow"}]