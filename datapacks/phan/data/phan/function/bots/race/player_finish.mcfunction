#finished!
tag @s remove ai
scoreboard players set @s lifespan 0
scoreboard players operation #checkID value = @s botID
execute as @e[type=block_display,tag=botController,x=197,y=-11,z=117,dx=1,dy=1,dz=1] if score @s botID = #checkID value run function phan:bots/race/player_finish_controller

#visuals
particle flash ~ ~1 ~ 0 0 0 1 1 force @a[tag=doneWithIntro]

#race will end 75 seconds after any finish
scoreboard players operation #newTimeLimit value = #vTimeLimit value
execute if score #newTimeLimit value matches 1500.. run scoreboard players set #newTimeLimit value 1500
#must abide by minimum time limit for level
scoreboard players operation #test value = #vTimeElapsed value
scoreboard players add #test value 1500
execute if score #test value < #vMinTimeLimit value run scoreboard players operation #newTimeLimit value = #vMinTimeLimit value
#apply the new time limit
scoreboard players operation #vTimeLimit value = #newTimeLimit value

#get finish pos! and increment the min position assignment number by 1
scoreboard players operation @s finishPos = #positionAssignMin value
scoreboard players operation @s racePosDisplay = @s finishPos
scoreboard players add #positionAssignMin value 1

#stop mandating anvils to stop 1st place
scoreboard players set #1stPlaceLeadTime value 0

#announce to everyone else that we finished
execute as @a[tag=doneWithIntro] at @s run playsound minecraft:entity.firework_rocket.blast master @s ~ 100000 ~ 100000 1
scoreboard players set @a[tag=doneWithIntro] actionbarDelay 40
execute if score @s finishPos matches ..1 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"yellow","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"yellow","bold":true},{"translate":"gp.versus.pos.1st","color":"yellow","bold":true},{"text":"]","color":"yellow","bold":true}]
execute if score @s finishPos matches 2 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.2nd","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 3 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.3rd","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 4 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.4th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 5 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.5th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 6 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.6th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 7 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.7th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 8 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.8th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 9 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.9th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 10 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.10th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]

execute if score @s finishPos matches 11 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.11th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 12 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.12th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 13 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.13th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 14 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.14th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 15 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.15th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 16 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.16th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 17 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.17th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 18 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.18th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 19 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.19th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 20 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.20th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]

execute if score @s finishPos matches 21 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.21st","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 22 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.22nd","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 23 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.23rd","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 24 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.24th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 25 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.25th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 26 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.26th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 27 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.27th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 28 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.28th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 29 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.29th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 30 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.30th","color":"white","bold":true},{"text":"]","color":"white","bold":true}]

execute if score @s finishPos matches 31 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.31st","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 32 run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"translate":"gp.versus.pos.32nd","color":"white","bold":true},{"text":"]","color":"white","bold":true}]
execute if score @s finishPos matches 33.. run title @a[tag=doneWithIntro] actionbar ["",{"translate":"gp.versus.player_finished","color":"white","bold":true,"with":[{"selector":"@s","color":"aqua","italic":false,"bold":false}]},{"text":" "},{"text":"[","color":"white","bold":true},{"score":{"name":"@s","objective":"finishPos"},"color":"white","bold":true},{"text":"]","color":"white","bold":true}]